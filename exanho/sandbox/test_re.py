import datetime
import re

locations = ['-rw-r--r--    1 784      785          1453 Apr 05 00:00 nsiOrganizationTypesList_all_20200405000009_001.xml.zip', '-rw-r--r--    1 784      785          1483 Apr 06 00:00 nsiOrganizationTypesList_inc_20200405000000_20200406000000_001.xml.zip', '-rw-r--r--    1 784      785          1483 Apr 07 00:00 nsiOrganizationTypesList_inc_20200406000000_20200407000000_001.xml.zip', '-rw-r--r--    1 784      785          1483 Apr 08 00:00 nsiOrganizationTypesList_inc_20200407000000_20200408000000_001.xml.zip', '-rw-r--r--    1 784      785          1483 Apr 09 00:00 nsiOrganizationTypesList_inc_20200408000000_20200409000000_001.xml.zip', '-rw-r--r--    1 784      785          1483 Apr 10 00:00 nsiOrganizationTypesList_inc_20200409000000_20200410000000_001.xml.zip']
# locations = ['drwxrwxr-x    2 784      535          4096 Apr 05 00:00 edoNsiOperatorInfo', 'drwxrwxr-x    2 784      535          4096 Apr 05 00:00 eruzNsiContractorExcludeReason', 'drwxrwxr-x    2 784      535          4096 Mar 22  2019 eruzNsiContractorUserRight', 'drwxr-xr-x    2 784      535          4096 Jul 28  2015 fcsStandardContract', 'drwxr-xr-x    2 784      535          4096 Jul 28  2015 fcsStandardContractInvalid', 'drwxrwxr-x    2 784      535          4096 Apr 05 00:00 nsiAbandonedReason', 'drwxr-xr-x    2 784      535          4096 Apr 09 00:00 nsiAuditActionSubjects', 'drwxrwxr-x    2 784      535          4096 Apr 05 00:00 nsiBankGuaranteeRefusal615Reason', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiBankGuaranteeRefusalReason', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiBudget', 'drwxr-xr-x    2 784      535          4096 Sep 15  2015 nsiBusinessControls', 'drwxr-xr-x    2 784      535          4096 Apr 09 00:00 nsiCalendarDays', 'drwxrwxr-x    2 784      535          4096 Apr 05 00:00 nsiChangePriceFoundation', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiClosedMethodsOfReason', 'drwxr-xr-x    2 784      535         45056 Apr 09 00:00 nsiCommission', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiCommissionRole', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiContractCurrencyCBRF', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiContractExecutionDoc', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiContractModificationReason', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiContractOKOPFExtraBudget', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiContractPenaltyReason', 'drwxr-xr-x    2 784      535          4096 Dec 28  2014 nsiContractPriceChangeReason', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiContractRefusalReason', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiContractReparationDoc', 'drwxr-xr-x    2 784      535          4096 Apr 08 00:00 nsiContractSingleCustomerReason', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiContractTerminationReason', 'drwxr-xr-x    2 784      535        159744 Apr 09 14:07 nsiControl99Subjects', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiCurrency', 'drwxr-xr-x    2 784      535          4096 Apr 09 00:00 nsiDeviationFactFoundation', 'drwxrwxr-x    2 784      535          4096 Apr 05 00:00 nsiDrugChangeReasons', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiDrugOKEI', 'drwxrwxr-x    2 784      535          4096 Apr 05 00:00 nsiEAESCountry', 'drwxr-xr-x    2 784      535          4096 Apr 09 00:00 nsiETP', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiEvalCriterion', 'drwxr-xr-x    2 784      535         86016 Apr 08 08:25 nsiFarmDrugDictionary', 'drwxr-xr-x    2 784      535         24576 Apr 05 00:04 nsiKBKBudget', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiKOSGU', 'drwxr-xr-x    2 784      535          4096 Apr 09 01:00 nsiKTRU', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiKVR', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiModifyReasonOZ', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiOKEI', 'drwxrwxr-x    2 784      535          4096 Apr 05 00:00 nsiOKFS', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiOKOPF', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiOKPD', 'drwxr-xr-x    2 784      535         24576 Apr 09 00:00 nsiOKPD2', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiOKSM', 'drwxrwxr-x    2 784      535         49152 Apr 05 00:02 nsiOKTMO', 'drwxr-xr-x    2 784      535         36864 Apr 09 00:00 nsiOKTMOPPO', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiOKVED', 'drwxr-xr-x    2 784      535          4096 Apr 09 00:00 nsiOKVED2', 'drwxr-xr-x    2 784      535          4096 Apr 09 00:00 nsiOffBudgetType', 'drwxr-xr-x    2 784      535         81920 Apr 09 00:00 nsiOrganization', 'drwxr-xr-x    2 784      535          4096 Apr 09 00:00 nsiOrganizationRights', 'drwxr-xr-x    2 784      535          4096 Apr 09 00:00 nsiOrganizationType', 'drwxr-xr-x    2 784      535          4096 Jan 20  2017 nsiPPO', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiPlacingWay', 'drwxr-xr-x    2 784      535          4096 Apr 09 00:00 nsiPlanPositionChangeReason', 'drwxr-xr-x    2 784      535          4096 Apr 09 00:00 nsiPublicDiscussionDecisions', 'drwxr-xr-x    2 784      535          4096 Apr 09 00:00 nsiPublicDiscussionQuestionnaries', 'drwxr-xr-x    2 784      535          4096 Apr 09 00:00 nsiPurchaseDocumentTypes', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiPurchasePlanPositionChangeReason', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiPurchasePreferences', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiPurchaseRejectReason', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiSingleCustomerReasonOZ', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiSpecialPurchase', 'drwxrwxr-x    2 784      535          4096 Apr 05 00:00 nsiSpecialPurchases2020', 'drwxrwxr-x    2 784      535          4096 Apr 05 00:00 nsiTRUAdmissionNPA', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiTenderPlan2017ContractLifeCycleCase', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiTenderPlan2017PositionChangeReason', 'drwxrwxr-x    2 784      535          4096 Apr 05 00:00 nsiTenderPlan2020PositionChangeReason', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 nsiTenderPlanPurchaseGroup', 'drwxr-x---    2 784      785        851968 Apr 09 00:00 nsiUser', 'drwxrwxr-x    2 784      535          4096 Apr 05 00:00 nsiWorldTimeZone', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 pprf615NsiExclusionReason', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 pprf615NsiFundingSource', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 pprf615NsiPurchaseSubject', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 pprf615NsiTerminationGround', 'drwxr-xr-x    2 784      535          4096 Apr 05 00:00 pprf615NsiTerminationReason']

def match(re_comp, location):
    res = re_comp.match(location)

    filename = res.group('filename')
    size = res.group('size')
    create_dt = res.group('size')

    return filename, size, create_dt

def split(location):
    permission, num, user, group, size, *date, filename  = re.split(r'\s+', location)

    # create_dt = None
    # if len(date) == 3:
    #     current_year = datetime.date.today().year
    #     create_dt = datetime.datetime.strptime('{}{}'.format(current_year, ''.join(date)), '%Y%b%d%H:%M')

    return filename, size, date

if __name__ == "__main__":
    pattern = ''
    re_comp = re.compile(pattern)
    for location in locations:
        filename, size, date = split(location)
        print(f'{location}:\nfilename: {filename}\nsize:{size}\ncreate_dt: {date}\n')
        # print(location)
        if len(date) == 3:
            if date[2].isdigit(): # ['Apr', '08', '2018']
                print(datetime.datetime.strptime(''.join(date), '%b%d%Y'))
            elif ':' in date[2]: # ['Apr', '08', '00:03']
                current_year = datetime.date.today().year
                print(datetime.datetime.strptime('{}{}'.format(current_year, ''.join(date)), '%Y%b%d%H:%M'))